---
title: TCP自问自答
date: 2018-06-11 07:12:04
categories:
- 技术 
tags:
- 网络 TCP 协议
---
    
    # TCP 知识
## TCP报文头结构和关键字段？

```
源端口 目的端口
序列号
确认号
首部大小 保留 URG、PSH、SYN、ACK、FIN、RST 窗口大小
校验和 紧急指针
```
<!--more-->
## MSS含义？

```
Maximum Segment Size
常用于syn包中，作为可选字段
指明本段所能接收的最大长度报文段
```
## TCP如何保证可靠性？
 
 ```
 1. 分割传输内容为合适大小
 2. 发端定时器、重传机制
 3. 接收端确认
 4. 校验和
 5. 去除多余包
 6. 接收端排序
 7. 流量控制
 ```    
 
## 2MSL时长为多少？为什么有2MSL？

```
按照协议为MSL为2分钟，实际实现为30s到2分钟。
防止主动关闭的ACK丢失，等待被动关闭侧回复FIN后，主动关闭再次发送ACK。
```
## 3次握手，第三次没有收到ack，而是rst会怎样？
 
```
执行被动关闭，等待新的连接
```
## TCP状态变迁图？


## SO_REUSEADDR选项？


